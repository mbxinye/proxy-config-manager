# é«˜æ€§èƒ½æ¨¡å¼è¯´æ˜

## ğŸš€ æ€§èƒ½æå‡

### è®¢é˜…è·å–
- **æ™®é€šæ¨¡å¼**: ä¸²è¡Œè·å–ï¼Œ1ä¸ªè®¢é˜…å®Œæˆåæ‰è·å–ä¸‹ä¸€ä¸ª
- **é«˜æ€§èƒ½æ¨¡å¼**: **10çº¿ç¨‹å¹¶è¡Œ**ï¼ŒåŒæ—¶è·å–10ä¸ªè®¢é˜…
- **æå‡**: 10å€é€Ÿåº¦æå‡

### èŠ‚ç‚¹éªŒè¯
- **æ™®é€šæ¨¡å¼**: æ‰¹æ¬¡éªŒè¯ï¼Œ20ä¸ª/æ‰¹ï¼Œæ¯æ‰¹é—´éš”0.5ç§’
- **é«˜æ€§èƒ½æ¨¡å¼**: **100å¹¶å‘è¿æ¥**ï¼Œæ‰€æœ‰èŠ‚ç‚¹åŒæ—¶æµ‹è¯•
- **æå‡**: 5-10å€é€Ÿåº¦æå‡

## ğŸ“Š ä½¿ç”¨æ–¹å¼

### å¿«é€Ÿå¼€å§‹

```bash
# ä½¿ç”¨é«˜æ€§èƒ½æ¨¡å¼ï¼ˆæ¨èï¼‰
./test_fast.sh

# å¯¹æ¯”ï¼šæ™®é€šæ¨¡å¼
./test.sh
```

### ä»…ä½¿ç”¨å¤šçº¿ç¨‹è·å–è®¢é˜…

```bash
cd scripts
python3 subscription_manager_fast.py
```

### ä»…ä½¿ç”¨é«˜å¹¶å‘éªŒè¯

```bash
cd scripts
python3 validator_fast.py
```

## âš™ï¸ é…ç½®è°ƒæ•´

### è°ƒæ•´å¹¶å‘æ•°

ç¼–è¾‘ `test_fast.sh`ï¼š

```bash
# è®¢é˜…è·å–çº¿ç¨‹æ•°ï¼ˆé»˜è®¤10ï¼‰
# ä¿®æ”¹ subscription_manager_fast.py ä¸­çš„ max_workers å‚æ•°

# èŠ‚ç‚¹éªŒè¯å¹¶å‘æ•°ï¼ˆé»˜è®¤100ï¼‰
# ä¿®æ”¹ validator_fast.py ä¸­çš„ max_concurrent å‚æ•°
```

### ç¯å¢ƒå˜é‡æ§åˆ¶

```bash
# å‡å°‘æ‰¹æ¬¡å»¶è¿Ÿï¼ˆæ›´å¿«å®Œæˆï¼‰
export PROXY_BATCH_DELAY=0.1
./test_fast.sh

# å¢åŠ æ‰¹æ¬¡å¤§å°ï¼ˆæ›´å¤šå¹¶å‘ï¼‰
export PROXY_BATCH_SIZE=100
./test_fast.sh
```

## â±ï¸ æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹

å‡è®¾æœ‰50ä¸ªè®¢é˜…ï¼Œå…±500ä¸ªèŠ‚ç‚¹ï¼š

| é˜¶æ®µ | æ™®é€šæ¨¡å¼ | é«˜æ€§èƒ½æ¨¡å¼ | æå‡ |
|------|----------|-----------|------|
| è®¢é˜…è·å– | 150ç§’ (3ç§’Ã—50) | 15ç§’ | **10x** |
| èŠ‚ç‚¹éªŒè¯ | 60ç§’ (20ä¸ªÃ—3ç§’) | 8ç§’ | **7.5x** |
| **æ€»è®¡** | **210ç§’** | **23ç§’** | **9x** |

## âš ï¸ æ³¨æ„äº‹é¡¹

### ç½‘ç»œé™åˆ¶
- **é˜²ç«å¢™**: é«˜å¹¶å‘å¯èƒ½è§¦å‘é˜²ç«å¢™é™åˆ¶ï¼Œå¦‚æœå‡ºç°å¤§é‡è¿æ¥è¢«æ‹’ç»ï¼Œè¯·é™ä½å¹¶å‘æ•°
- **è·¯ç”±å™¨**: å®¶ç”¨è·¯ç”±å™¨å¯èƒ½é™åˆ¶å¹¶å‘è¿æ¥æ•°ï¼Œè¶…è¿‡500å¯èƒ½ä¸ç¨³å®š

### è®¢é˜…æºé™åˆ¶
- æŸäº›è®¢é˜…æºå¯èƒ½é™åˆ¶å¹¶å‘è¯·æ±‚ï¼Œå¦‚æœå‡ºç°429é”™è¯¯ï¼Œè¯·å‡å°‘çº¿ç¨‹æ•°

### æ¨èé…ç½®

**å®¶ç”¨ç½‘ç»œ (100Mbps)**:
```bash
# è®¢é˜…è·å–: 5-10çº¿ç¨‹
# èŠ‚ç‚¹éªŒè¯: 50-100å¹¶å‘
```

**æœåŠ¡å™¨/äº‘ä¸»æœº (1Gbps)**:
```bash
# è®¢é˜…è·å–: 20çº¿ç¨‹
# èŠ‚ç‚¹éªŒè¯: 200å¹¶å‘
```

**å—é™ç½‘ç»œ (ä»£ç†ç¯å¢ƒ)**:
```bash
# è®¢é˜…è·å–: 3-5çº¿ç¨‹
# èŠ‚ç‚¹éªŒè¯: 20-50å¹¶å‘
export PROXY_BATCH_SIZE=30
```

## ğŸ¯ ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡æµ‹è¯•**: ä½¿ç”¨é«˜æ€§èƒ½æ¨¡å¼å¿«é€Ÿè·å¾—ç»“æœ
2. **å®šæœŸæ›´æ–°**: å¯ä»¥ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œå¯¹æœåŠ¡å™¨å‹åŠ›å°
3. **å¤§é‡è®¢é˜… (>100)**: å¿…é¡»ä½¿ç”¨é«˜æ€§èƒ½æ¨¡å¼
4. **ç½‘ç»œä¸ç¨³å®š**: ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œæ›´ç¨³å®šå¯é 

## ğŸ“ æ–°å¢æ–‡ä»¶

```
scripts/
â”œâ”€â”€ subscription_manager_fast.py    # å¤šçº¿ç¨‹è®¢é˜…ç®¡ç†å™¨
â””â”€â”€ validator_fast.py              # é«˜å¹¶å‘éªŒè¯å™¨
test_fast.sh                        # é«˜æ€§èƒ½æµ‹è¯•è„šæœ¬
```

## ğŸ’¡ åŸç†è¯´æ˜

### å¤šçº¿ç¨‹è·å–è®¢é˜…
```python
with ThreadPoolExecutor(max_workers=10) as executor:
    # åŒæ—¶å‘èµ·10ä¸ªHTTPè¯·æ±‚
    futures = [executor.submit(fetch, url) for url in urls]
```

### é«˜å¹¶å‘éªŒè¯èŠ‚ç‚¹
```python
# ä¿¡å·é‡æ§åˆ¶å¹¶å‘
semaphore = asyncio.Semaphore(100)

async def test():
    async with semaphore:  # æœ€å¤š100ä¸ªå¹¶å‘
        await test_tcp_connect()

# åŒæ—¶åˆ›å»ºæ‰€æœ‰ä»»åŠ¡
tasks = [test() for _ in range(500)]
results = await asyncio.gather(*tasks)
```

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1: è¿æ¥è¢«æ‹’ç»
**ç—‡çŠ¶**: å¤§é‡ "è¿æ¥è¢«æ‹’ç»" é”™è¯¯
**è§£å†³**: é™ä½å¹¶å‘æ•°
```bash
# ä¿®æ”¹ validator_fast.py
max_concurrent = 50  # ä»100é™åˆ°50
```

### é—®é¢˜2: 429 Too Many Requests
**ç—‡çŠ¶**: è®¢é˜…è·å–è¿”å›429é”™è¯¯
**è§£å†³**: å‡å°‘çº¿ç¨‹æ•°
```bash
# ä¿®æ”¹ subscription_manager_fast.py
max_workers = 5  # ä»10é™åˆ°5
```

### é—®é¢˜3: å†…å­˜å ç”¨è¿‡é«˜
**ç—‡çŠ¶**: ç³»ç»Ÿå¡é¡¿ï¼Œå†…å­˜ä¸è¶³
**è§£å†³**: åˆ†æ‰¹å¤„ç†
```bash
# ä½¿ç”¨æ™®é€šæ¨¡å¼ï¼Œæˆ–å‡å°æ‰¹æ¬¡å¤§å°
export PROXY_BATCH_SIZE=30
```